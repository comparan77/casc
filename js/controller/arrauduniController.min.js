var arrTipoTransporte=[],arrVigilantes=[],arrLstAudUniFiles=[],ddlTipoVehiculo="ddl_tipovehiculo",ddlVigilante="ddl_vigilante",Arrauduni=function(){function a(a){for(var b=0;b<arrTipoTransporte.length;b++)arrTipoTransporte[b].Id==a&&(x$("#txt_placa").attr("value",arrTipoTransporte[b].Requiere_placa?"":"N.A."),x$("#txt_caja").attr("value",arrTipoTransporte[b].Requiere_caja?"":"N.A."),x$("#txt_caja1").attr("value",arrTipoTransporte[b].Requiere_caja1?"":"N.A."),x$("#txt_caja2").attr("value",arrTipoTransporte[b].Requiere_caja2?"":"N.A."))}function b(a){for(var b=0;b<arrTipoTransporte.length;b++)if(arrTipoTransporte[b].Id==a)return arrTipoTransporte[b].Nombre}function c(a){for(var b=0;b<arrTipoTransporte.length;b++)if(arrTipoTransporte[b].Nombre==a)return arrTipoTransporte[b].Id}function d(){Common.fillDropDownList(ddlTipoVehiculo,arrTipoTransporte),Common.fillDropDownList(ddlVigilante,arrVigilantes),a(arrTipoTransporte[0].Id),j(),i(),k(),l(),m=new InputSearch({content:"searchData",maskDataSearch:"pedimento",clickBtnSearch:g,callbackBtnSearch:function(a){f(a)},functionModel:OperationModel.precargaGetByRef})}function e(a){var b='<img class="pure-img" src="data:image/jpeg;base64,'+a+'" >';x$("#evidencias").html("top",'<div id="photo_'+n+'" class="pure-u-1-2"><div class="l-box">'+b+"</div></div>");var c=new BeanEntrada_aud_uni_files(a);arrLstAudUniFiles.push(c),n++}function f(a){try{x$("#txt_operador_db").attr("value",a.Operador).removeClass("hidden"),x$("#txt_tipovehiculo_db").attr("value",b(a.Id_transporte_tipo)).removeClass("hidden"),document.getElementById(ddlTipoVehiculo).value=a.Id_transporte_tipo,x$("#"+ddlTipoVehiculo).fire("change"),"N.A."!=a.Placa&&x$("#txt_placa_db").attr("value",a.Placa),"N.A."!=a.Caja&&x$("#txt_caja_db").attr("value",a.Caja),"N.A."!=a.Caja1&&x$("#txt_caja1_db").attr("value",a.Caja1),"N.A."!=a.Caja2&&x$("#txt_caja2_db").attr("value",a.Caja2),x$("#txt_sello_db").attr("value",a.Sello).removeClass("hidden")}catch(a){alert(a)}}function g(){x$("#txt_referencia").attr("value",""),x$("#h_referencia").attr("value",""),x$("#h_id_entrada_precarga").attr("value",""),x$("#txt_operador_db").attr("value","").addClass("hidden"),x$("#txt_operador").attr("value",""),x$("#txt_tipovehiculo_db").attr("value","").addClass("hidden"),x$("#txt_placa_db").attr("value","N.A."),x$("#txt_caja_db").attr("value","N.A."),x$("#txt_caja1_db").attr("value","N.A."),x$("#txt_caja2_db").attr("value","N.A."),x$("#txt_sello_db").attr("value",""),document.getElementById("chk_sello_roto").checked=!1,document.getElementById("txt_relato").value="",x$("#evidencias").html(""),arrLstAudUniFiles=[],x$(".coincide_dato").each(function(a,b,c){document.getElementById(x$(a).attr("id")).checked&&(document.getElementById(x$(a).attr("id")).checked=!1,x$(a).fire("click"))})}function h(){try{var a=new MyRequestsCompleted({numRequest:2,singleCallback:function(){Common.loadAjax(!1),d()}});0==arrTipoTransporte.length||0==arrVigilantes?(Common.loadAjax(!0),0==arrTipoTransporte.length?CatalogosModel.TipoTransporteGetLst(function(b){arrTipoTransporte=b,a.requestComplete(!0)}):a.requestComplete(!0),0==arrVigilantes.length?CatalogosModel.vigilanteGetLst(function(b){arrVigilantes=b,a.requestComplete(!0)}):a.requestComplete(!0)):d()}catch(a){alert(a)}}function i(){x$(".coincide_dato").each(function(a,b,d){x$(a).on("click",function(){var a=String(x$(this).attr("id")).split("_")[1];if("No Coincide"==x$("#lbl_"+a).attr("title"))switch(x$("#lbl_"+a).attr("title","Coincide"),x$("#lbl_"+a).html("Coincide"),a){case"datosvehiculo":x$(".datoVehiculo").each(function(a,b,c){x$(a).addClass("hidden");var d=x$(a).attr("id");x$("#"+d).attr("value",x$("#"+d+"_db").attr("value"))});break;case"tipovehiculo":x$("#pnl_"+a).addClass("hidden"),x$("#txt_"+a).attr("value",c(x$("#txt_"+a+"_db").attr("value"))),document.getElementById(ddlTipoVehiculo).value=x$("#txt_"+a).attr("value"),x$("#"+ddlTipoVehiculo).fire("change");break;default:x$("#pnl_"+a).addClass("hidden"),x$("#txt_"+a).attr("value",x$("#txt_"+a+"_db").attr("value"))}else switch(x$("#lbl_"+a).attr("title","No Coincide"),x$("#lbl_"+a).html("No Coincide"),a){case"datosvehiculo":x$(".datoVehiculo").each(function(a,b,c){x$(a).removeClass("hidden"),x$("#"+ddlTipoVehiculo).fire("change")});break;case"tipovehiculo":x$("#pnl_"+a).removeClass("hidden"),x$("#txt_"+a).attr("value",document.getElementById(ddlTipoVehiculo).value);break;default:x$("#pnl_"+a).removeClass("hidden"),x$("#txt_"+a).attr("value","")}})})}function j(){x$("#"+ddlTipoVehiculo).on("change",function(){var b=this.value;a(this.value),x$("#txt_tipovehiculo").attr("value",b)})}function k(){x$("#btn_capturePhoto").on("click",function(){try{Common.capturePhoto(e)}catch(a){alert(a)}})}function l(){x$("#btn_save").on("click",function(){Common.setEstatusBtn("btn_save","Guardando",!0);try{var a=document.getElementById("ddl_vigilante"),b=new BeanEntrada_aud_uni(1*x$("#h_id_dato").attr("value"),1*x$("#txt_tipovehiculo").attr("value"),String(x$("#h_txt_dato").attr("value")),String(x$("#txt_operador").attr("value")),String(x$("#txt_placa").attr("value")),String(x$("#txt_caja").attr("value")),String(x$("#txt_caja1").attr("value")),String(x$("#txt_caja2").attr("value")),String(x$("#txt_sello").attr("value")),document.getElementById("chk_sello_roto").checked,document.getElementById("txt_relato").value,a.options[a.selectedIndex].text,arrLstAudUniFiles);OperationModel.entradaAudUniAdd(b,function(a){"object"==typeof a?(Common.notificaRegExitoso(),window.open(urlHandler+"rpt/entradas_aud/"+a.Referencia+"/"+a.prefixImg+"casc028.pdf?"+(new Date).getTime(),"_system","location=yes"),g()):alert(a),Common.setEstatusBtn("btn_save","Guardar",!1)})}catch(a){alert(a)}})}this.Init=h;var m,n=1};