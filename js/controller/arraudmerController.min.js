var arrLstAudMerFiles=[],Arraudmer=function(){function a(){g(),Common.fillDropDownList(ddlVigilante,arrVigilantes),f(),i=new InputSearch({content:"searchData",maskDataSearch:"pedimento",txtPlaceHolder:"No. de Pedimento",clickBtnSearch:d,callbackBtnSearch:function(a){c(a)},functionModel:OperationModel.precargaGetByRef}),h()}function b(a){var b='<img class="pure-img" src="data:image/jpeg;base64,'+a+'" >';x$("#evidencias").html("top",'<div id="photo_'+j+'" class="pure-u-1-2"><div class="l-box">'+b+"</div></div>");var c=new BeanEntrada_aud_mer_files(a);arrLstAudMerFiles.push(c),j++}function c(a){try{x$("#h_id_entrada_precarga").attr("value",a.Id),x$("#h_referencia").attr("value",a.Referencia)}catch(a){}}function d(){x$("#txt_referencia").attr("value",""),x$("#h_referencia").attr("value",""),x$("#h_id_entrada_precarga").attr("value","")}function e(){try{0==arrTipoTransporte.length?(Common.loadAjax(!0),CatalogosModel.vigilanteGetLst(function(b){arrVigilantes=b,Common.loadAjax(!1),a()})):a()}catch(a){}}function f(){x$("#btn_capturePhoto").on("click",function(){try{Common.capturePhoto(b)}catch(a){alert(a)}})}function g(){x$("#chk_parcial").on("click",function(){"Entrada_Unica"==x$("#lbl_parcial").attr("title")?(x$("#lbl_parcial").attr("title","Entrada_Parcial"),x$("#lbl_parcial").html("Entrada Parcial"),x$("#lbl_bulto_porrecibir").removeClass("hidden"),x$("#lbl_bulto_faltante").addClass("hidden")):(x$("#lbl_parcial").attr("title","Entrada_Unica"),x$("#lbl_parcial").html("Entrada Ãšnica"),x$("#lbl_bulto_porrecibir").addClass("hidden"),x$("#lbl_bulto_faltante").removeClass("hidden"))})}function h(){x$("#btn_save").on("click",function(){Common.setEstatusBtn("btn_save","Guardando",!0);try{var a=document.getElementById("ddl_vigilante"),b=new BeanEntrada_aud_mer(1*x$("#h_id_dato").attr("value"),String(x$("#h_txt_dato").attr("value")),String(x$("#txt_operador").attr("value")),document.getElementById("chk_parcial").checked,1*String(x$("#txt_bulto_declarado").attr("value")),1*String(x$("#txt_bulto_recibido").attr("value")),1*String(x$("#txt_bulto_abierto").attr("value")),1*String(x$("#txt_bulto_danado").attr("value")),1*String(x$("#txt_pallet").attr("value")),document.getElementById("txt_relato").value,a.options[a.selectedIndex].text,arrLstAudMerFiles);OperationModel.entradaAudMerAdd(b,function(a){"object"==typeof a?(Common.notificaRegExitoso(),window.open(urlHandler+"rpt/entradas_aud/"+a.Referencia+"/"+a.prefixImg+"casc028.pdf?"+(new Date).getTime(),"_system","location=yes"),d()):alert(a),Common.setEstatusBtn("btn_save","Guardar",!1)})}catch(a){alert(a)}})}this.Init=e;var i,j=1};